# 싱글톤 패턴

하나의 클래스에 하나의 인스턴스만 가지는 패턴이다. <br/>
인스턴스 생성에 많은 코스트가 드는 데이터베이스 연결 모듈에 많이 사용된다. <br/>
인스턴스 생성을 효율적으로 한다는 장점이 있다. <br/>
다만, 의존성이 높아지고, TDD를 할 때 불편한 단점도 있다.

## 간단 구현

### 단순한 메서드 호출

싱글톤 패턴 생성 여부를 확인하고, 없으면 새로 만들어 반환하고, 있다면 기존 인스턴스 반환한다. <br/>
원자성이 없기에, 멀티스레드 환경에선 2개 이상 만들어질 수 있다.

### synchronized

인스턴스를 반환하기 전까지 격리 공간에 놓기 위해 해당 키워드로 잠금할 수 있다. <br/>
최초 접근한 스레드가 해당 메서드 호출시에 다른 스레드가 접근하지 못하도록 하는 것이다. <br/>
호출할 때마다 lock이 걸려 성능저하가 된다.

### 정적 멤버(즉시 초기화, Eager Initialization)

static으로 싱글톤을 만드는 방법이다. <br/>
클래스가 참조될 때, 로딩과 초기화가 이뤄진다. <br/>
이때 메모리 상에서 한 번만 생성되며, 프로그램 종료 시까지 유지된다. <br/>
즉시 할당되는 게 단점이라면 단점이다.

### 정적 블록(즉시 초기화 - 메서드 활용)

static 사용 가능하다.

### 정적 멤버와 Lazy Holder(중첩 클래스) - 추천

singleInstanceHolder라는 내부 클래스 생성한다. <br/>
Singleton클래스가 최초에 로딩되더라도 초기화되지 않는다. <br/>
getInstance가 호출될 때, 해당 클래스가 로딩되어 인스턴스를 생성한다. <br/>
그래서 getInstance를 강제하게 된다.

### 이중 확인 잠금(DCL)

Double Checked Locking이다. <br/>
인스턴스 생성 여부를 싱글톤 패턴 잠금 전에 한 번, <br/>
객체를 생성하기 전에 한 번, 총 두 번 한다. <br/>
인스턴스가 존재하지 않을 때만 잠금을 걸 수 있기에 앞서 생겼던 문제점을 해결할 수 있다.

### enum - 추천

기본적으로 스레드세이프한 점이 보장된다.
