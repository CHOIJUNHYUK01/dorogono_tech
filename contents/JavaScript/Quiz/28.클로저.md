# 클로저는 무엇이고, 왜, 어떻게 사용하는 건가

### TL;DR

"You Don't Know JS"라는 책에서 클러저를 다음과 같이 정의한다. <br />
"클로저"는 함수가 그 함수가 실행되는 범위 밖에서도 자신의 "렉시컬 스코프"를 기억하고 접근할 수 있을 때 발생한다.

간단히 말해, 함수는 생성 당시의 범위에 있던 변수들에 접근이 가능하다. <br />
이것을 함수의 "렉시컬 스코프"라고 부른다. <br />
"클로저"는 외부 함수가 실행을 마친 후에도 이런 변수들에 접근할 수 있는 함수다. <br />
마치 함수가 원래의 환경을 기억하고 잇는 것과 같다.

**기억해야 할 주요 포인트**: <br />

- 클로저는 내부 함수가 외부(렉시컬) 스코프의 변수에 접근할 수 있을 때, 심지어 외부 함수가 실행을 마친 후에도 발생한다. <br />
- 클로저는 함수가 생성된 환경을 기억하게 해주며, 그 환경이 더이상 존재하지 않더라도 유효하다. <br />
- 클로저는 JS에서 콜백, 이벤트 핸들러, 비동기 함수 등에서 광범위하게 사용된다.

---

JS에서 클로저는 선언된 "렉시컬 스코프"를 캡쳐한다. <br />
해당 스코프가 닫힌 후에도 외부 스코프의 변수에 접근하고, 조작할 수 있는 함수다.

### 클로저는 어떻게 작동할까?

- 렉시컬 스코핑: <br />
  JS는 렉시컬 스코핑을 사용해 함수가 변수에 접근할 수 있는 범위가 소스 코드 내에서의 실제 위치에 의해 결정된다.

- 함수 생성: <br />
  함수가 생성될 때, 그 함수는 자신이 생성된 렉시컬 스코프에 대한 참조를 유지한다. <br />
  이 스코프에는 클로저가 생성될 때, 범위 내에 있던 모든 지역 변수가 포함된다.

- 상태 유지: <br />
  클로저는 크로저가 캡처한 변수들이 함수 외부에서는 접근이 불가능하기에, 상태를 안전하게 유지할 때 자주 사용된다.

## ES6 문법과 클로저

ES6에서는 "화살표 함수"를 사용해 클로저를 생성할 수 있다. <br />
이를 통해 더 간결한 문법과 렉시컬 this 바인딩을 제공한다.

```javascript
const createCounter = () => {
  let count = 0;
  return () => {
    count += 1;
    return count;
  };
};

const counter = createCounter();
console.log(counter()); // Outputs: 1
console.log(counter()); // Outputs: 2
```

## React에서의 클로저

클로저는 어디에나 있다. <br />
아래 코드는 버튼 클릭 시, 카운터를 증가시키는 간단한 예제다. <br />
여기서 `handleClick`이 클로저를 형성한다. <br />
이는 외부 스코프 변수, `count`, `setCount`에 접근할 수 있다.

```javascript
import React, { useState } from "react";

function Counter() {
  const [count, setCount] = useState(0);

  const handleClick = () => {
    setCount(count + 1);
  };

  return <button onClick={handleClick}>Clicked {count} times</button>;
}
```

## 스코프를 사용하는 이유

- 데이터 캡슐화: <br />
  클로저는 클로저 외부에서 접근할 수 없는 비공개 변수와 함수를 만들 수 잇는 방법을 제공한다. <br />
  이는 구현 세부 사항을 숨기고, 상태를 캡슐화된 방식으로 유지하는 데 유용하다.

- 함수형 프로그래밍: <br />
  클로저는 함수형 프로그래밍 패러다임에서 기본적이다. <br />
  함수가 생성된 스코프에 접근하면서 나중에 호출될 수 있도록 하여, 부분 적용이나 커링 같은 기술을 가능하게 한다.

- 이벤트 핸들러 및 콜백: <br />
  JS에서 클로저는 이벤트 핸들러와 콜백에서 상태를 유지하거나, 핸들러나 콜백이 정의됐을 경우에 범위 내에 있던 변수에 접근하는 데 자주 사용된다.

- 모듈 패턴: <br />
  클로저는 JS에서 모듈 패턴을 가능하게 하여, 개인적이고 공개적인 부분을 가진 모듈을 생성할 수 있게 한다.
