# <link> 위치와 <script> 위치

CSS `<link>`는 주로 `<head>` 사이에, <br />
JavaScript `<script>`의 배치는 `</body>` 직전에 위치한다. <br />
왜 이렇게 하는 게 일반적일까?

간단히 말해서 이러한 배치는 페이지의 더 빠른 렌더링과 전반적인 성능을 향상할 수 있기 때문이다.

## <head>에 <link> 배치하기

최적화된 웹사이트를 구축하는 올바른 사양의 일부다. <br />
페이지가 처음 로드될 때, `HTML`과 `CSS`는 동시에 파싱된다. <br />
`HTML`은 `DOM`을, `CSS`는 `CSSOM`을 생성한다.

두 가지 모두 웹사이트의 시각적 요소를 생성하는 데 필요하다. <br />
이는 빠른 "First Meaningful Paint" 타이밍을 가능하게 한다.

`<head>`에 CSS `<link>`를 배치하면, 브라우저가 페이지 렌더링을 시작할 때, 스타일시트가 로드되어 사용할 준비가 되어 있음을 보장한다.

이러한 프로그레시브 렌더링은 사이트의 성능 점수를 측정하는 지표다. <br />
스타일 시트를 문서 하단에 두면, 많은 브라우저에서 프로그레시브 렌더링을 방해한다. <br />
일부 브라우저는 스타일이 변경될 때, 페이지 요소를 다시 그리는 걸 피하기 위해 렌더링을 차단한다. <br />
그러면 사용자는 빈 흰색 페이지만 보게 된다. <br />
다른 경우에는 스타일이 적용되지 않은 콘텐츠가 순간적으로 보이는 현상 (FOUC)가 발생할 수도 있다.

## </body> 직전에 <script> 배치하기

`<script>` 태그는 다운로드되고, 실행하는 동안 `HTML` 파싱을 차단한다. <br />
그래서 페이지 표시 속도를 늦출 수도 있다. <br />
`<script>`를 하단에 배치하면, `HTML`이 먼저 파싱되어 사용자에게 표시될 수 있다.

이렇게 배치하면, 예외는 스크립트에 `document.write()`가 포함된 경우다. <br />
요즘은 이를 사용하는 것이 좋은 관행이 아니다.

또한, 전체 문서가 파싱될 때까지 브라우저가 스크립트 다운로드를 시작할 수 없다는 걸 의미한다. <br />
굳이 `<head>`에 배치해야 한다면, `defer` 속성을 사용해야 한다. <br />
이는 `HTML`이 파싱된 후에만 스크립트를 실행하는 동일한 효과를 얻을 수 있다. <br />
하지만 브라우저가 더 일찍 스크립트 다운로드를 시작할 수 있다.

`</body>` 태그 직전에 스크립트를 넣으면, 빈 캐시에서 페이지가 더 빠르게 로드되는 것처럼 보일 수 있다. <br />
스크립트가 나머지 문서 다운로드를 차단하지 않기 때문이다. <br />
하지만 페이지 로드 중에 실행하고 싶은 코드가 있다하더라도, 전체 페이지가 로드된 후에만 실행된다. <br />
이런 스크립트는 `<head>` 태그에 넣어 더 일찍 실행시킬 수 있다. <br />
그래서 프라임된 캐시에서는 페이지가 실제로 더 빠르게 로드되는 것처럼 보일 수 있다.

## 선택적 태그

`HTML5` 사양에 따르면, `<head>`, `<body>`같은 특정 태그는 선택사항이다. <br />
Google의 스타일 가이드는 바이트를 절약하기 위해 이들을 제거하는 걸 권장하기도 한다. <br />
하지만 이 관행은 아직 널리 채택되지 않았고, 성능 향상은 미미할 거다. <br />
그리고 대부분의 사이트에서는 중요하지 않을 거다.
