# 뉴스피드

뉴스 피드 앱을 만드는 건, 클래식하다. <br />
하지만 이걸 어떻게 디자인하는지 더 깊게 들어가 얘기를 하는 콘텐츠가 거의 없다시피 한다.

페이스북, 인스타그램, X, 레딧 등이 예시다.

---

## 요구사항

### 핵심 기능

1. 해당 유저와 친구가 만든 포스트를 포함해 보여준다. <br />
2. 포스트는 좋아요와 같은 리액션 기능이 있어야 한다. <br />
3. 포스트를 만들어 올릴 수 있어야 한다.

답글과 공유 기능은 후에 다룬다. 핵심 기능은 아니다.

### 어떤 포스트를 보여주는가

우선적으로 텍스트와 이미지 기반 포스트다.

### 어떤 페이지네이션 UX가 피드에 사용되나

인피니트 스크롤이 주로 쓰인다. <br />
유저가 그들의 마지막 피드에 도달했을 때, 새 포스트를 보여주는 방식이다.

### 모바일 기기에서도 사용될 것인가

우선 순위는 아니지만, 있으면 좋다.

---

## 아키텍쳐 / high-level 디자인

![architecture](https://www.greatfrontend.com/img/questions/news-feed-facebook/news-feed-architecture.png)

### 각 컴포넌트별 책임

- Server : <br />
  피드 포스트를 불러오고, 새 포스트를 올리는 HTTP API를 제공한다.

- Controller : <br />
  앱의 데이터 흐름을 제어하고, 서버에 데이터를 요청한다.

- Client Store: <br />
  앱 전반에 걸쳐 필요한 데이터를 저장한다. <br />
  뉴스 피드의 맥락에서, 여기에 저장된 대부분의 데이터는 피드 UI에 필요한 서버에서 발생한 데이터다.

- Feed UI: <br />
  피드 포스트 목록을 포함한다. <br />
  새 게시물을 작성하기 위한 UI도 포함한다.

  1. Feed Post <br />
     피드 게시물의 데이터를 표시한다. <br />
     게시물과 상호작용할 수 있는 버튼을 포함한다.

  2. Post Composer <br />
     WYSIWYG 에디터를 제공한다. <br />
     WYSIWYG는 "What You See Is What You Get"의 약자다. <br />
     즉, "보이는 대로 얻게 해주는 편집기"라고 보면 된다.

### 렌더링 접근 방식

어디서 콘텐츠를 로딩할지, 서버 아니면 클라이언트에서 할지 결정할 수 있다.

- SSR (Server-Side Rendering) <br />
  서버 측에서 HTML을 렌더링하는 전통적인 방법이 있다. <br />
  SEO에 최적이고, 정적인 콘텐츠를 제공하거나 상호작용이 적다면 최적이다. <br />
  블로그, 문서, 쇼핑몰 페이지같은 게 여기에 속한다.

- CSR (Client-Side Rendering) <br />
  브라우저에서 렌더링한다. <br />
  JavaScript를 사용해, 동적으로 DOM 요소를 추가한다. <br />
  상호작용이 많은 콘텐츠에 최적이다. <br />
  대시보드 앱, 채팅 앱 등이 여기에 속한다.

뉴스 피드 앱은 이 둘 사이 어딘가에 속한다. <br />
정적인 콘텐츠도 많지만, 상호작용도 그에 맞게 많이 존재한다.

실제로, 페이스북은 하이브리드 접근을 한다. <br />
일단 SSR로 초기 로딩을 빠르게 한다. <br />
그 후에 상호작용을 할 수 있게 만든다. <br />
유저가 페이지 끝에 도달해서 새 뉴스 피드가 추가된다면, 그건 CSR을 사용하는 거다.

React와 Vue 같은 현대적인 UI JavaScript 프레임워크들과, Next.js와 Nuxt와 같은 메타 프레임워크들이 이러한 렌더링 전략을 지원한다.

[웹 랜더링 방식](https://web.dev/articles/rendering-on-the-web?hl=ko)
[Meta가 채택한 방식](https://engineering.fb.com/2020/05/08/web/facebook-redesign/)

---
